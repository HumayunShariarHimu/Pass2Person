<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Pass2Personality - Deep JSON Psychological Analyzer</title>
<style>
body {font-family: Arial; background:#101010; color:white; padding:30px;}
.box {max-width:650px; margin:auto; background:#1c1c1c; padding:25px; border-radius:12px;}
input {width:100%; padding:12px; border:none; border-radius:8px; margin-top:10px;}
button {margin-top:10px; width:100%; padding:12px; background:#4CAF50; color:white; border:none; border-radius:8px; cursor:pointer;}
.result {margin-top:20px; padding:15px; background:#222; border-radius:10px; white-space:pre-line; font-size:14px;}
</style>
</head>
<body>
<div class="box">
    <h2>Pass2Person</h2>
    <input id="passInput" placeholder="আপনার টেক্সট/পাসওয়ার্ড লিখুন">
    <button onclick="analyze()">Analyze Psychology</button>
    <div id="output" class="result"></div>
</div>

<script>
// ------------------------------
//        PSYCHOLOGY DB
// ------------------------------
const PsychologyDB = {
    emotional: {
        positive: ["love","happy","joy","peace","friend","god"],
        negative: ["hate","angry","sad","fear","pain","kill"]
    },
    attachmentWords: {
        secure: ["family","trust","home","safe","love"],
        anxious: ["wait","miss","want","need","alone"],
        avoidant: ["alone","independent","privacy","space"]
    },
    patterns: {
        sequential: /123|456|789|abc|abcd/,
        repeated: /(.)\1{3,}/
    }
};

// ------------------------------
//        FEATURE EXTRACTION
// ------------------------------
function extractFeatures(text){
    const hasNumber = /\d/.test(text);
    const hasLetter = /[a-zA-Z]/.test(text);
    const hasSymbol = /[^a-zA-Z0-9]/.test(text);
    const length = text.length;

    // Entropy approximation
    const freq = {}; for(const ch of text){ freq[ch]=(freq[ch]||0)+1; }
    let e=0; const L=text.length||1;
    for(const k in freq){ const p=freq[k]/L; e -= p*Math.log2(p);}
    const entropy=Math.round(e*1000)/1000;

    return {hasNumber,hasLetter,hasSymbol,length,entropy};
}

// ------------------------------
//      NLP & Psychological Logic
// ------------------------------
function analyzeText(text){
    const words=text.toLowerCase().split(/[\s\d\W]+/).filter(w=>w);

    // Emotional tone
    let emoScore=0;
    words.forEach(w=>{
        if(PsychologyDB.emotional.positive.includes(w)) emoScore+=2;
        if(PsychologyDB.emotional.negative.includes(w)) emoScore-=2;
    });
    let emotionalTone = "Neutral";
    if(emoScore>=4) emotionalTone="Positive";
    else if(emoScore<=-4) emotionalTone="Negative";

    // Behavioral pattern
    let behavior="Balanced";
    if(words.some(w=>w.length>=8)) behavior="Analytical";
    else if(words.some(w=>w.length<=2)) behavior="Impulsive";
    else behavior="Creative";

    // Cognitive style
    let cognitiveStyle = PsychologyDB.patterns.sequential.test(text) ? "Sequential"
                       : PsychologyDB.patterns.repeated.test(text) ? "Random"
                       : "Complex";

    // Big5 (heuristic)
    const big5 = {
        openness: Math.min(1, Math.max(0, (words.filter(w=>w.length>4).length)/Math.max(words.length,1))),
        conscientiousness: Math.min(1, Math.max(0, (words.filter(w=>w.length<=4).length)/Math.max(words.length,1))),
        extraversion: words.filter(w=>["love","friend","happy"].includes(w)).length/Math.max(words.length,1),
        agreeableness: words.filter(w=>["trust","safe","peace"].includes(w)).length/Math.max(words.length,1),
        neuroticism: words.filter(w=>["fear","sad","angry"].includes(w)).length/Math.max(words.length,1)
    };

    // Attachment style
    let attachment="Secure";
    if(words.some(w=>PsychologyDB.attachmentWords.anxious.includes(w))) attachment="Anxious";
    else if(words.some(w=>PsychologyDB.attachmentWords.avoidant.includes(w))) attachment="Avoidant";

    return {emotionalTone,behavior,cognitiveStyle,big5,attachment,wordCount:words.length};
}

// ------------------------------
//         MAIN ANALYZE
// ------------------------------
function analyze(){
    const text=document.getElementById("passInput").value.trim();
    if(!text) return alert("টেক্সট লিখুন");

    const features=extractFeatures(text);
    const personality=analyzeText(text);

    const result = {
        timestamp: new Date().toISOString(),
        inputLength: text.length,
        features,
        personality
    };

    document.getElementById("output").innerText=JSON.stringify(result,null,2);
    document.getElementById("passInput").value='';
}
</script>
</body>
</html>
